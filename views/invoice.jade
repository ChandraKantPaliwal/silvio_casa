extends layout

block title_top
  | Silvio Casa

block meta_tags
  meta(content='', name='description')
  meta(content='', name='author')

block title
  | Welcome to #{title}

block hint
  | Hint

block title_left
  | YOYO

block breadcrumb
  ul.page-breadcrumb.breadcrumb
    li
      i.fa.fa-home
    li
      a(href="item")
        | Invoice
block page_content
  .row
    .col-md-12
      .portlet.box.light-gray
        .portlet-title
          .caption
            i.fa.fa-search
            | Search Invoice
        .portlet-body.form
          form.form-horizontal#invoice(action='/invoice' method='post')
            .form-body
              .form-group
                label.control-label.col-md-3
                  | Search By
                .col-md-4
                  .radio-list
                    label.radio-inline
                      span
                        input(type='radio' class='' name='search-type' value='yes' style='margin-left:0px;')
                      | &nbsp;Customer Name
                    label.radio-inline
                      span
                        input(type='radio' class='' name='search-type' value='no' style='margin-left:0px;' checked)
                      | &nbsp;Id
              .form-group
                label.control-label.col-md-3
                  | Customer Name
                  span.required
                    | *
                .col-md-4
                  input.form-control#customer-name(name='name')
              .form-group
                label.control-label.col-md-3
                  | Invoice Number
                  span.required
                    | *
                .col-md-4
                  input.form-control#invoice-number(name='name')
            .col-md-offset-3.col-md-9
              button.btn.green(type="button" id='search' name="btn_search" style="margin-bottom:20px") Submit
        .portlet-body
          table#sample_2.table.table-striped.table-bordered.table-hover.table-full-width
            thead
              tr
                th
                  | Invoice Number
                th
                  | Customer Name
                th
                  | Invoice Date
                th
                  | Advance
                th
                  | Total Amount
                th
                  | Actions
            tbody
              - each invoice in invoices
                tr
                  td
                    | #{invoice.id}
                  td
                    | #{invoice.customer_name}
                  td
                    | #{invoice.created_date}
                  td
                    | #{invoice.advance}
                  td
                    | #{invoice.total_payable_amount}
                  td
                    button.order-delete.btn.default.red-stripe(bill-id="#{invoice.id}")
                      i.fa.fa-times
                      | Cancel Order
                    button.btn.default.red-stripe.edit-bill(bill-id="#{invoice.id}")
                      i.fa.fa-edit
                      | Edit
                    button.btn.default.red-stripe.view-order(bill-id="#{invoice.id}")
                      i.fa.fa-bars
                      | View
block doc_ready
  script.
    $(document).ready(function(){
      $('.order-delete').click(function(){
        $(this).html("Removing...");
        $.get("/deleteBill/"+$(this).attr('bill-id'), function(data) {
            if(data.success == "true"){
                $(this).html("Removed");
                bootbox.alert(data.message, function(){
                  window.location.replace("/invoice");
                });
            } else {
                bootbox.alert(data.message);
                // $(".generate_bill").html("Generate Bill");
            }
        });
      });
      $('.order-edit').click(function(){
        $(this).html("Editing...");
        $.get("/bill/"+$(this).attr('bill-id'), function(data) {
            if(data.success == "true"){
                bootbox.alert(data.message, function(){
                  window.location.replace("/invoice");
                });
            } else {
                bootbox.alert(data.message);
                // $(".generate_bill").html("Generate Bill");
            }
        });
      });
    });